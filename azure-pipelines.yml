# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main

jobs:
- job: EchoText
  pool:
    vmImage: 'ubuntu-latest'
  steps:
  - script: echo This run is to demonstrate possible GitHub Actions/Azure Pipelines integration through GitHub Repository Dispatch Events.
  displayName: echo Explanatory Text

- job: RESTAPICallToBing
  pool: server
  steps:
  - task: InvokeRESTAPI@1
    inputs:
      connectionType: 'connectedServiceName'
      serviceConnection: 'Test Bing Connection'
      method: 'GET'
      waitForCompletion: 'false'
  
- job: RESTAPICallToGitHub
  pool: server
  steps:
  - task: InvokeRESTAPI@1
    inputs:
      connectionType: 'connectedServiceName'
      serviceConnection: 'GitHub.com/repos/mstfbl/pytorch Connection'
      method: 'POST'
      headers: |
        {
        "Content-Type":"application/json", 
        "Accept:application/vnd.github.v3+json"
        }
      body: |
        {
        "event_type":"custom_event_type"
        }
      waitForCompletion: 'false'